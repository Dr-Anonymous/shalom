---
---

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Live Notes Editor</title>
	<script src="https://www.gstatic.com/firebasejs/8.7.0/firebase-app.js"></script>
	<script src="https://www.gstatic.com/firebasejs/8.7.0/firebase-database.js"></script>
    <script src="https://cdn.ckeditor.com/ckeditor5/34.0.0/classic/ckeditor.js"></script>
</head>
<body>
    <h1>Live Notes Editor</h1>
    <div id="editor">
        <p>This is some sample content.</p>
    </div>
    <script>
var editor,
	firebaseConfig = {
			apiKey: "AIzaSyBpFCW5CcLoQP3ThnTm2gtOJoxLPAnas-A",
			authDomain: "mydatabase-c35da.firebaseapp.com",
			databaseURL: "https://mydatabase-c35da-default-rtdb.firebaseio.com/",
			projectId: "mydatabase-c35da",
			storageBucket: "mydatabase-c35da.appspot.com",
			messagingSenderId: "945373860956",
			appId: "1:945373860956:web:3ea16749c73345eb684299"
			};

function writeFirebaseData(functionName, value) {
	database.set({"functionName" : functionName, "value" : value});
}

document.onkeydown = checkKey;
function checkKey(e) {
	e = e || window.event;
	if (e.keyCode == '70' && e.ctrlKey || e.keyCode == '70' && e.metaKey) {
		// f + ctrl or cmd key
		writeFirebaseData('loadData', [" ", editor.getData()]);
		e.preventDefault();
		}
}
//before exit reset everything
window.onbeforeunload = function(){ writeFirebaseData(false, 0) }; 

// Initialize Firebase
firebase.initializeApp(firebaseConfig);
// Get a reference to the database service
database = firebase.database().ref();
//editor
ClassicEditor
    .create( document.querySelector( '#editor' ) )
    .then( newEditor => {
        editor = newEditor;
    } )
    .catch( error => {
        console.error( error );
    } );
    </script>
</body>
</html>
